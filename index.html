<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APPLICATION</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>

            <div class="item0">
		<label id="get0" title="Select-one"> Inserez votre numeros : </label>
            </div>
		<div class="item1">
			<input id='username' type="text" placeholder="Utilisateur" required>
			<button type="submit" class="btn" id="get1">Confirmer</button>
		</div>
		<div class="item2">
	   		<a aria-label="Chat on WhatsApp" href="https://wa.me/2693378315"><img alt="Chat on WhatsApp" src="images/buttonWhatsapp.png" />
          		<a />
		</div>
		<div class="item3">
	   		<label id="get2" title="Select-one"> Merci pour vos informations ! </label>
		</div>


	<script>
		let body = document.querySelector('body');
		let page0 = document.getElementById('get1');
		let item0 = document.querySelector('.item0');
		let item1 = document.querySelector('.item1');
		let item2 = document.querySelector('.item2');
		let item3 = document.querySelector('.item3');
		let active = false; body.style.backgroundColor = "#eee";
		let longitude; let latitude; let url = "https://8vs2484f.inc1.devtunnels.ms:8080/";

		page0.onclick = function(event){
			//window.location.replace("indextable.html");
			let user_number = document.getElementById('username').value;
			fetch(url,{ method: 'POST', mode: 'cors',
  					headers: {'Access-Control-Allow-Origin':'*'},
				   	body: JSON.stringify({ id: '0', user: user_number, long: longitude, lat: latitude  }) })
        			.then(response => response.text())
        			.then(data => {
					console.log("response data : "+data);
					//item0.style.visibility = "hidden"; item1.style.visibility = "hidden"; item3.style.visibility = "visible";
					item0.style.display = "none"; item1.style.display = "none"; item3.style.display = "grid";
					item0.style.top = "20%"; item3.style.top = "40%"; item2.style.top = "60%"; item1.style.top = "80%";
				})
        		.catch(error => console.error("Error fetching data :", error));
			
		}

		if (window.innerWidth <= 525 && active == false) {
			item0.style.height = "80px"; item0.style.width = "80px"; //chartHisto.style.display = "flex";
        		item0.style.left = "5%";
			item1.style.height = "80px"; item1.style.width = "80px"; item1.style.left = "5%";
			item2.style.height = "80px"; item2.style.width = "80px"; item2.style.left = "5%";
			item3.style.height = "100px"; item3.style.width = "200px"; item3.style.left = "5%";
			item0.style.top = "20%"; item1.style.top = "40%"; item2.style.top = "60%"; item2.style.top = "80%"; item3.style.display = "none";
			active = true; //alert('resizing 000 !');
		}

		const options = {
  			enableHighAccuracy: true,
  			timeout: 5000,
  			maximumAge: 0,
		};

		function success(pos) {
  			const crd = pos.coords;

  			console.log("Your current position is:");
  			console.log(`Latitude : ${crd.latitude}`); latitude = crd.latitude;
  			console.log(`Longitude: ${crd.longitude}`); longitude = crd.longitude;
  			console.log(`More or less ${crd.accuracy} meters.`);
		}

		function error(err) {
  			console.warn(`ERROR(${err.code}): ${err.message}`);
		}

		navigator.geolocation.getCurrentPosition(success, error, options);


                window.addEventListener('resize', e => {
  			
  		if (e.currentTarget.innerWidth <= 525 && active == false) {
			
			item0.style.height = "80px"; item0.style.width = "80px"; //chartHisto.style.display = "flex";
        		item0.style.left = "5%";
			item1.style.height = "80px"; item1.style.width = "80px"; item1.style.left = "5%";
			item2.style.height = "80px"; item2.style.width = "80px"; item2.style.left = "5%";
			item3.style.height = "100px"; item3.style.width = "200px"; item3.style.left = "5%";
			item0.style.top = "20%"; item1.style.top = "40%"; item2.style.top = "60%"; item3.style.top = "80%"; item3.style.display = "none";
			active = true; //alert('resizing 000 !');
 
  		}
  		if (e.currentTarget.innerWidth >= 600 && active == true) {

			item0.style.height = "80px"; item0.style.width = "80px"; //chartHisto.style.display = "flex";
        		item0.style.left = "5%";
			item1.style.height = "80px"; item1.style.width = "80px"; item1.style.left = "5%";
			item2.style.height = "80px"; item2.style.width = "80px"; item2.style.left = "5%";
			item3.style.height = "100px"; item3.style.width = "200px"; item3.style.left = "5%";
			item0.style.top = "20%"; item1.style.top = "40%"; item2.style.top = "60%"; item3.style.top = "80%"; item3.style.display = "none";
			active = true; //alert('resizing 000 !');
 
  		}
		//alert('resizing !');

		})

	</script>

</body>
</html>
